<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Picross</title>
    <style>

        #rutenett .rammetopp {
            height: 40px;
            width: 40px;
            border: solid;
            background-color: lightslategrey;
        }

        #rutenett .rammevenstre {
            height: 40px;
            width: 40px;
            border: solid;
            background-color: lightslategrey;
        }

        #rutenett .ruter {
            height: 40px;
            width: 40px;
            border: solid;
            background-color: white;
        }
    </style>
</head>
<body>

    //Picross. 2D Matrix

    <br />
    <br />
    <button onclick="levelSet(level1)">level1</button>


    <table id="rutenett" style="margin: 100px 0 0 100px;"></table>




    <script>
        let losning = [];
        let spillerslosning = [];

        let level1 = ["00", "10", "20", "30", "40", "50", "60", "70", "80", "90"];


        //let rutenett = new Array(storrelse);

        //for (i = 0; i < rutenett.length; i++) {
        //    rutenett[i] = new Array(storrelse);
        //}


        function lagLevel(storrelse) {
            var table = document.getElementById("rutenett");
            for (var i = 0; i < storrelse + 1; i++) {
                var row = document.createElement("tr");
                for (var j = 0; j < storrelse + 1; j++) {
                    var col = document.createElement("td");
                    if (i == 0 & j == 0) {
                        col.classList.add("hjorne");
                    }
                    if (i == 0) {
                        col.classList.add("rammetopp");
                        row.appendChild(col);
                    } else if(j == 0){
                        col.classList.add("rammevenstre");
                    } else {
                        col.classList.add("ruter")
                        col.addEventListener("click", skraver);
                    }

                    col.id = "" + (i-1) + (j-1);
                    col.farget = "false";
                    row.appendChild(col);
                }
                table.appendChild(row);
            }
        }


        function skraver(rute) {
            rute.target.style.backgroundColor == "black" ? rute.target.style.backgroundColor = "white" : rute.target.style.backgroundColor = "black";
            rute.target.style.backgroundColor == "black" ? rute.target.farget = true : rute.target.farget = false;
            if (rute.target.farget == true) {
                spillerslosning.push(rute.target.id);
            } else {
                let index = spillerslosning.indexOf(rute.target.id);
                if (index > -1) {
                    spillerslosning.splice(index, 1);
                }
            }

            if (sjekkLosning()) {
                console.log("hurra!");
            }

            console.log(spillerslosning);
        }

        function sjekkLosning() {
            spillerslosning.sort();

            if (spillerslosning.length != losning.length) {
                return false;
            }
            for (i = 0; i < spillerslosning.length; i++) {
                if (spillerslosning[i] != losning[i]) {
                    return false;
                }
            }
            return true;
        }

        function levelSet(level) {
            nullstill();
            losning = level;
            console.log(losning);
            lagLevel(losning.length);
        }

        function nullstill() {
            document.getElementById("rutenett").innerHTML = "";
            spillerslosning = [];
        }

    </script>
</body>
</html>